/*C2*/SET SCHEMA PUBLIC
drop table TRATING if exists
drop table TSEATS if exists
drop table TTRIPS if exists
drop table TTRIPS_TUSERS if exists
drop table TUSERS if exists
create table TRATING (id bigint not null, comment varchar(255), value integer, aboutSeat_trip_id bigint, aboutSeat_user_id bigint, fromSeat_trip_id bigint, fromSeat_user_id bigint, primary key (id))
create table TSEATS (comment varchar(255), status varchar(255), trip_id bigint, user_id bigint, primary key (trip_id, user_id))
create table TTRIPS (id bigint not null, arrivalDate date, availablePax integer, closingDate date, comments varchar(255), departure_address varchar(255), departure_city varchar(255), departure_country varchar(255), departure_state varchar(255), departure_wpt_lat double, departure_wpt_lon double, departure_zipCode varchar(255), departureDate date, destination_address varchar(255), destination_city varchar(255), destination_country varchar(255), destination_state varchar(255), destination_wpt_lat double, destination_wpt_lon double, destination_zipCode varchar(255), estimatedCost double, maxPax integer, status varchar(255), promoter_id bigint, primary key (id))
create table TTRIPS_TUSERS (aplicaciones_id bigint not null, aplicadores_id bigint not null, primary key (aplicaciones_id, aplicadores_id))
create table TUSERS (id bigint not null, email varchar(255), login varchar(255), name varchar(255), password varchar(255), status varchar(255), surname varchar(255), primary key (id))
alter table TRATING add constraint FK_rph64g079fuoml9537rbapieb foreign key (aboutSeat_trip_id, aboutSeat_user_id) references TSEATS
alter table TRATING add constraint FK_ne4hjsjk77ff4swatuhyjcj72 foreign key (fromSeat_trip_id, fromSeat_user_id) references TSEATS
alter table TSEATS add constraint FK_jnphy74vsqigr4ctfo1pfona2 foreign key (trip_id) references TTRIPS
alter table TSEATS add constraint FK_h42slqb9hwqgi60soq8oiyhu foreign key (user_id) references TUSERS
alter table TTRIPS add constraint FK_3mh75mm706i021clje0veu10y foreign key (promoter_id) references TUSERS
alter table TTRIPS_TUSERS add constraint FK_inrh0m78r8bjvngx615a8m9i4 foreign key (aplicadores_id) references TUSERS
alter table TTRIPS_TUSERS add constraint FK_rgqqfbtnempbm3o2vp6h0fkv9 foreign key (aplicaciones_id) references TTRIPS
create sequence hibernate_sequence start with 1 increment by 1
INSERT INTO TUSERS VALUES(1,'user1@gmail.com','user1','user1','user1','ACTIVE','user1')
COMMIT
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 2
